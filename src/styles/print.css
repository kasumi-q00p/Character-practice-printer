/**
 * 印刷用スタイル定義
 * A4サイズでの印刷最適化とグレー文字の印刷時濃度調整
 */

@media print {
  /* ページ設定 */
  @page {
    size: A4;
    margin: 20mm 15mm;
    
    /* ページ番号やヘッダー/フッターを非表示 */
    @top-left { content: none; }
    @top-center { content: none; }
    @top-right { content: none; }
    @bottom-left { content: none; }
    @bottom-center { content: none; }
    @bottom-right { content: none; }
  }

  /* 基本的な印刷設定 */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
  }

  /* ページ全体の設定 */
  html, body {
    width: 210mm !important;
    height: 297mm !important;
    margin: 0 !important;
    padding: 0 !important;
    font-size: 12pt !important;
    line-height: 1 !important;
    background: white !important;
    color: black !important;
  }

  /* 印刷時に非表示にする要素 */
  .no-print,
  .print-hidden,
  button,
  input,
  select,
  textarea,
  .controls,
  .sidebar,
  .navigation,
  .header,
  .footer {
    display: none !important;
  }

  /* 印刷対象のコンテナ */
  .printable,
  .print-content {
    display: block !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    background: white !important;
    box-shadow: none !important;
    border: none !important;
  }

  /* 練習シートのページ */
  .practice-sheet-page {
    width: 210mm !important;
    height: 297mm !important;
    margin: 0 !important;
    padding: 20mm 15mm !important;
    background: white !important;
    page-break-after: always;
    position: relative !important;
    overflow: hidden !important;
  }

  /* 最後のページは改ページしない */
  .practice-sheet-page:last-child {
    page-break-after: avoid;
  }

  /* 文字コンテナ */
  .character-container {
    position: absolute !important;
    color: #ddd !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* 練習用のグレー文字 */
  .practice-character {
    color: #ddd !important;
    font-weight: 100 !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* ガイド文字（より薄く） */
  .guide-character {
    color: #eee !important;
    font-weight: 100 !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* 書き順番号 */
  .stroke-order-number {
    color: #ff6b6b !important;
    background: rgba(255, 255, 255, 0.9) !important;
    font-weight: bold !important;
    font-size: 8pt !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* フォント設定 */
  .japanese-text {
    font-family: "Noto Sans JP", "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif !important;
  }

  .latin-text {
    font-family: "Noto Sans", "Arial", "Helvetica", sans-serif !important;
  }

  .monospace-text {
    font-family: "Noto Sans Mono", "Consolas", "Monaco", monospace !important;
  }

  /* 縦書きスタイル */
  .vertical-writing {
    writing-mode: vertical-rl !important;
    text-orientation: upright !important;
  }

  /* 横書きスタイル */
  .horizontal-writing {
    writing-mode: horizontal-tb !important;
    text-orientation: mixed !important;
  }

  /* 改ページ制御 */
  .page-break-before {
    page-break-before: always !important;
  }

  .page-break-after {
    page-break-after: always !important;
  }

  .page-break-avoid {
    page-break-inside: avoid !important;
  }

  /* 印刷品質向上 */
  .high-quality-print {
    image-rendering: -webkit-optimize-contrast !important;
    image-rendering: crisp-edges !important;
  }

  /* レイアウト調整 */
  .print-layout {
    display: block !important;
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
  }

  /* 余白調整 */
  .print-margin-top { margin-top: 20mm !important; }
  .print-margin-bottom { margin-bottom: 20mm !important; }
  .print-margin-left { margin-left: 15mm !important; }
  .print-margin-right { margin-right: 15mm !important; }

  /* 文字サイズ別の調整 */
  .font-size-12 { font-size: 12pt !important; }
  .font-size-16 { font-size: 16pt !important; }
  .font-size-20 { font-size: 20pt !important; }
  .font-size-24 { font-size: 24pt !important; }
  .font-size-32 { font-size: 32pt !important; }
  .font-size-48 { font-size: 48pt !important; }
  .font-size-72 { font-size: 72pt !important; }

  /* デバッグ用（開発時のみ使用） */
  .print-debug {
    border: 1px solid red !important;
    background: rgba(255, 0, 0, 0.1) !important;
  }

  /* 印刷プレビュー用 */
  .print-preview {
    background: white !important;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1) !important;
    margin: 10mm !important;
  }

  /* エラー表示を非表示 */
  .error-message,
  .warning-message,
  .debug-info {
    display: none !important;
  }

  /* スクロールバーを非表示 */
  ::-webkit-scrollbar {
    display: none !important;
  }

  /* 選択を無効化 */
  * {
    user-select: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
  }

  /* リンクの装飾を削除 */
  a {
    text-decoration: none !important;
    color: inherit !important;
  }

  /* 印刷時の背景画像を有効化 */
  * {
    background-image: inherit !important;
  }
}

/* 印刷プレビュー用のスタイル（画面表示時） */
@media screen {
  .print-preview-mode {
    background: #f5f5f5;
    padding: 20px;
  }

  .print-preview-page {
    background: white;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    margin: 0 auto 20px;
    width: 210mm;
    height: 297mm;
    position: relative;
    overflow: hidden;
  }

  .print-preview-page:last-child {
    margin-bottom: 0;
  }
}